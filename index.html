<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Flappy Bird</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <script>
        class Bird extends Phaser.Physics.Arcade.Sprite {
            constructor(scene, x, y) {
                super(scene, x, y, 'bird');
                scene.add.existing(this);
                scene.physics.add.existing(this);
                this.setCollideWorldBounds(true);
                this.setGravityY(1000);
                this.setOrigin(0.5);
                this.setScale(0.5);
            }

            flap() {
                this.setVelocityY(-400);
            }
        }

        class Pipe extends Phaser.Physics.Arcade.Sprite {
            constructor(scene, x, y, frame) {
                super(scene, x, y, 'pipe', frame);
                scene.add.existing(this);
                scene.physics.add.existing(this);
                this.setImmovable(true);
                this.setVelocityX(-200);
            }
        }

        class MainScene extends Phaser.Scene {
            constructor() {
                super({ key: 'MainScene' });
            }

            preload() {
                this.load.image('bird', 'bird.png');
                this.load.image('pipe', 'pipe.png');
                this.load.image('background', 'background.png');
            }

            create() {
                this.add.image(200, 300, 'background');
                this.bird = new Bird(this, 100, 300);
                this.pipes = this.physics.add.group();
                this.score = 0;
                this.scoreText = this.add.text(10, 10, 'Score: 0', { fontSize: '32px', fill: '#000' });

                this.input.keyboard.on('keydown-SPACE', () => {
                    this.bird.flap();
                });

                this.time.addEvent({
                    delay: 1500,
                    callback: this.addPipe,
                    callbackScope: this,
                    loop: true
                });

                this.physics.add.collider(this.bird, this.pipes, this.gameOver, null, this);
            }

            update() {
                if (this.bird.y > 600 || this.bird.y < 0) {
                    this.gameOver();
                }

                this.pipes.getChildren().forEach(pipe => {
                    if (pipe.x < -pipe.width) {
                        this.pipes.remove(pipe, true, true);
                        this.score += 1;
                        this.scoreText.setText('Score: ' + this.score);
                    }
                });
            }

            addPipe() {
                const pipeY = Phaser.Math.Between(-100, 100);
                const pipeTop = new Pipe(this, 400, pipeY, 0);
                const pipeBottom = new Pipe(this, 400, pipeY + 500, 1);
                this.pipes.add(pipeTop);
                this.pipes.add(pipeBottom);
            }

            gameOver() {
                this.physics.pause();
                this.bird.setTint(0xff0000);
                this.add.text(200, 300, 'Game Over', { fontSize: '64px', fill: '#000' }).setOrigin(0.5);
                this.input.keyboard.on('keydown-SPACE', () => {
                    this.scene.restart();
                });
            }
        }

        const config = {
            type: Phaser.AUTO,
            width: 400,
            height: 600,
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 0 },
                    debug: false
                }
            },
            scene: MainScene
        };

        const game = new Phaser.Game(config);
    </script>
</body>
</html>